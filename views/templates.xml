<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="pricelist_list_custom_redirect" inherit_id="website_sale.pricelist_list">
        <xpath expr="//span[hasclass('switcher_pricelist')]/parent::a" position="attributes">
            <attribute name="t-att-href">'/shop/change_pricelist/%s?redirect=%s' % (pl.id, request.httprequest.url)</attribute>
        </xpath>
    </template>

    <template id="products_pricelist_visibility" inherit_id="website_sale.products">
        <xpath expr="//t[@t-call='website_sale.pricelist_list']" position="replace">
            <t t-if="website.is_pricelist_selector_active and (not website.pricelist_visibility_group_id or user_id.has_group(website.pricelist_visibility_group_xml_id))">
                <t t-call="website_sale.pricelist_list">
                    <t t-set="_classes" t-valuef="d-none d-lg-inline ms-3"/>
                </t>
            </t>
        </xpath>
    </template>

    <template id="product_pricelist_visibility" inherit_id="website_sale.product">
        <xpath expr="//t[@t-call='website_sale.pricelist_list']" position="replace">
            <t t-if="website.is_pricelist_selector_active and (not website.pricelist_visibility_group_id or user_id.has_group(website.pricelist_visibility_group_xml_id))">
                <t t-call="website_sale.pricelist_list">
                    <t t-set="_classes" t-valuef="d-none d-lg-inline ms-3"/>
                </t>
            </t>
        </xpath>
    </template>
</odoo>